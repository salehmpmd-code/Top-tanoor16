<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ú©Ø§ÙÙ‡ ØªØ§Ù¾ ØªÙ†ÙˆØ±</title>

  <!-- ===========================
       1. STYLE
       =========================== -->
  <style>
    /* Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ ØªÙ… */
    :root{
      --bg:#0f1720;
      --card:#0f1728;
      --muted:#9aa4b2;
      --text:#e6eef6;
      --primary:#ff6b35;
      --secondary:#ffd166;
      --glass: rgba(255,255,255,0.04);
      --radius:12px;
      --shadow: 0 6px 18px rgba(2,6,23,0.6);
      --speed: 300ms;
      --accent-glow: 0 6px 30px rgba(255,107,53,0.12);
    }

    html.light{
      --bg:#f7f9fb;
      --card:#ffffff;
      --muted:#6b7280;
      --text:#0b1220;
      --primary:#ff6b35;
      --secondary:#ffb86b;
      --glass: rgba(255,255,255,0.6);
      --shadow: 0 8px 24px rgba(12,20,30,0.06);
      --accent-glow: 0 6px 30px rgba(255,107,53,0.08);
    }

    /* Ù¾Ø§ÛŒÙ‡ */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Vazirmatn", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,var(--bg), #07101a 120%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      scroll-behavior:smooth;
    }

    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    /* Ú©Ø§Ù†ØªÛŒÙ†Ø± */
    .container{
      width:min(1200px,94%);
      margin:0 auto;
      padding:28px 0;
    }

    /* Ù‡Ø¯Ø± */
    header{
      position:fixed;
      top:18px;
      left:18px;
      right:18px;
      z-index:1200;
      transition:all var(--speed) ease;
      backdrop-filter: blur(6px);
      border-radius:14px;
      box-shadow:var(--shadow);
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:12px 18px;
      display:flex;
      align-items:center;
      gap:12px;
    }
    header.shrink{ padding:8px 14px; transform:translateY(-6px) scale(0.995); }

    .logo{
      width:48px;height:48px;border-radius:10px;
      background:linear-gradient(135deg,var(--primary),var(--secondary));
      display:flex;align-items:center;justify-content:center;
      font-weight:800;color:#fff;font-size:18px;flex:0 0 48px;
      box-shadow:var(--accent-glow);
    }
    .brand{
      display:flex;flex-direction:column;line-height:1;
    }
    .brand .title{font-weight:700;font-size:15px}
    .brand .tag{font-size:12px;color:var(--muted)}

    nav.nav{
      margin-inline-start:auto;
      display:flex;gap:14px;align-items:center;
    }
    nav.nav a{padding:8px 10px;border-radius:8px;font-size:14px;color:var(--muted)}
    nav.nav a.active{background:var(--glass);color:var(--text);box-shadow:var(--accent-glow)}

    .header-actions{display:flex;gap:8px;align-items:center;margin-inline-start:12px}
    .btn{
      background:transparent;border:1px solid rgba(255,255,255,0.04);
      color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer;
      transition:all 180ms ease;
    }
    .btn:hover{transform:translateY(-3px);box-shadow:var(--accent-glow)}
    .icon-btn{width:44px;height:44px;display:inline-flex;align-items:center;justify-content:center}

    /* Ù‡ÛŒØ±Ùˆ */
    .hero{
      margin-top:110px;
      display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:center;
      padding:36px 0;
    }
    .hero-left h1{font-size:40px;margin:0 0 12px}
    .hero-left p{color:var(--muted);margin:0 0 18px}
    .hero-actions{display:flex;gap:12px}
    .cta{background:var(--primary);color:#fff;padding:12px 18px;border-radius:12px;font-weight:700}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 14px;border-radius:12px;color:var(--text)}

    .hero-cards{display:grid;grid-template-columns:repeat(1,1fr);gap:12px;margin-top:18px}
    .info-card{background:var(--card);padding:12px;border-radius:12px;box-shadow:var(--shadow);display:flex;gap:12px;align-items:center}
    .info-card .icon{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--secondary),var(--primary));display:flex;align-items:center;justify-content:center;color:#111;font-weight:700}

    /* Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ù‡Ø¯Ø± */
    .hero-slider{position:relative;border-radius:16px;overflow:hidden;box-shadow:var(--shadow)}
    .hero-slide{width:100%;height:320px;display:flex;align-items:center;justify-content:center;background-size:cover;background-position:center;transition:opacity 600ms ease;opacity:0}
    .hero-slide.active{opacity:1}
    .slider-dots{position:absolute;left:12px;bottom:12px;display:flex;gap:8px}
    .dot{width:10px;height:10px;border-radius:50%;background:rgba(0,0,0,0.3);cursor:pointer}
    .dot.active{background:var(--primary);box-shadow:var(--accent-glow)}

    /* toolbar */
    .toolbar{display:flex;gap:12px;align-items:center;margin:18px 0}
    .filters{display:flex;gap:8px;flex-wrap:wrap}
    .filters button{padding:8px 12px;border-radius:999px;border:0;background:var(--glass);color:var(--text);cursor:pointer}
    .filters button.active{background:var(--primary);color:#111}

    .search{
      margin-inline-start:auto;display:flex;align-items:center;gap:8px;background:var(--card);padding:8px;border-radius:12px;border:1px solid rgba(255,255,255,0.02)
    }
    .search input{background:transparent;border:0;color:var(--text);outline:none;width:220px}

    /* Ú¯Ø±ÛŒØ¯ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
    .sections{margin-top:18px;display:grid;gap:28px}
    .section{padding:8px 0}
    .section h2{margin:0 0 12px}
    .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    .card{
      background:linear-gradient(180deg,var(--card), rgba(255,255,255,0.01));
      border-radius:14px;padding:12px;box-shadow:var(--shadow);transition:transform 220ms ease, box-shadow 220ms ease;
      display:flex;flex-direction:column;gap:8px;cursor:default;
    }
    .card:hover{transform:translateY(-8px);box-shadow:var(--accent-glow)}
    .thumb{height:160px;border-radius:10px;overflow:hidden;background:#0b1220}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .title{font-weight:700}
    .price{font-weight:800;color:var(--primary)}
    .tags{display:flex;gap:6px}
    .tag{background:rgba(255,255,255,0.04);padding:6px 8px;border-radius:999px;font-size:12px;color:var(--muted)}

    .card-actions{display:flex;gap:8px;margin-top:auto}
    .btn-outline{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:10px;color:var(--text)}

    /* Ù…ÙˆØ¯Ø§Ù„ */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:none;align-items:center;justify-content:center;z-index:1400}
    .modal-backdrop.open{display:flex}
    .modal{width:min(760px,94%);background:var(--card);padding:18px;border-radius:14px;box-shadow:var(--shadow)}
    .modal .close{margin-left:auto}

    /* drawer Ù…ÙˆØ¨Ø§ÛŒÙ„ */
    .drawer{position:fixed;top:0;bottom:0;right:-320px;width:320px;background:var(--card);z-index:1500;padding:18px;box-shadow:var(--shadow);transition:right 300ms ease}
    .drawer.open{right:0}
    .drawer .close{display:block;margin-bottom:12px}

    /* Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ù„Ø§ */
    .to-top{position:fixed;left:18px;bottom:18px;width:48px;height:48px;border-radius:12px;background:var(--primary);display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;box-shadow:var(--accent-glow);opacity:0;transform:translateY(20px);transition:all 220ms ease;z-index:1600}
    .to-top.show{opacity:1;transform:translateY(0)}

    /* ÙÙˆØªØ± */
    footer{padding:36px 0;color:var(--muted);text-align:center;margin-top:36px}

    /* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
    @media (max-width:980px){
      .hero{grid-template-columns:1fr;gap:18px;margin-top:90px}
      .cards{grid-template-columns:repeat(2,1fr)}
      nav.nav{display:none}
      header{left:12px;right:12px}
    }
    @media (max-width:640px){
      .cards{grid-template-columns:1fr}
      .hero-slide{height:220px}
      .search input{width:120px}
    }

    /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¸Ø§Ù‡Ø± Ø´Ø¯Ù† Ø³Ú©Ø´Ù† */
    .reveal{opacity:0;transform:translateY(12px);transition:opacity 600ms ease, transform 600ms ease}
    .reveal.visible{opacity:1;transform:none}
  </style>
</head>
<body>
  <!-- ===========================
       2. BODY
       =========================== -->

  <!-- Ù‡Ø¯Ø± -->
  <header id="siteHeader" role="banner" aria-label="Ù‡Ø¯Ø± Ø³Ø§ÛŒØª">
    <div class="logo" aria-hidden="true">TT</div>
    <div class="brand" aria-hidden="false">
      <div class="title">Ú©Ø§ÙÙ‡ ØªØ§Ù¾ ØªÙ†ÙˆØ±</div>
      <div class="tag">Ø·Ø¹Ù…ØŒ ÙØ¶Ø§ØŒ ØªØ¬Ø±Ø¨Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯</div>
    </div>

    <nav class="nav" role="navigation" aria-label="Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ">
      <a href="#dessert" data-target="dessert">Ø¯Ø³Ø±</a>
      <a href="#fastfood" data-target="fastfood">ÙØ³Øªâ€ŒÙÙˆØ¯</a>
      <a href="#hot" data-target="hot">Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ú¯Ø±Ù…</a>
      <a href="#cold" data-target="cold">Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ø³Ø±Ø¯</a>
      <a href="#info" data-target="info">Ø§Ø·Ù„Ø§Ø¹Ø§Øª</a>
    </nav>

    <div class="header-actions">
      <button class="btn icon-btn" id="filterToggle" aria-label="ÙÛŒÙ„ØªØ±">ÙÛŒÙ„ØªØ±</button>
      <button class="btn icon-btn" id="themeToggle" aria-label="ØªØºÛŒÛŒØ± ØªÙ…">ğŸŒ™</button>
      <button class="btn icon-btn" id="menuToggle" aria-label="Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„">â˜°</button>
    </div>
  </header>

  <!-- Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø§ØµÙ„ÛŒ -->
  <main class="container" id="mainContent">
    <!-- Ù‡ÛŒØ±Ùˆ -->
    <section class="hero" aria-labelledby="heroTitle">
      <div class="hero-left">
        <h1 id="heroTitle">Ú©Ø§ÙÙ‡ ØªØ§Ù¾ ØªÙ†ÙˆØ±</h1>
        <p id="heroSubtitle">Ù‚Ù‡ÙˆÙ‡ ØªØ®ØµØµÛŒØŒ Ù…Ø­ÛŒØ· Ø¯Ù„Ù†Ø´ÛŒÙ† Ùˆ ØªØ¬Ø±Ø¨Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯. Ù…Ù†ÙˆÛŒ Ù…Ø§ Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ Ùˆ Ø³ÙØ§Ø±Ø´ Ø¯Ù‡ÛŒØ¯.</p>
        <div class="hero-actions">
          <a class="cta" href="#menu">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ù†Ùˆ</a>
          <a class="ghost" href="#info">ØªÙ…Ø§Ø³ Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</a>
        </div>

        <div class="hero-cards" aria-hidden="false">
          <div class="info-card">
            <div class="icon">â°</div>
            <div>
              <div style="font-weight:700">Ø³Ø§Ø¹Ø§Øª Ú©Ø§Ø±ÛŒ</div>
              <div class="muted">Û¸ ØµØ¨Ø­ ØªØ§ Û±Û± Ø´Ø¨</div>
            </div>
          </div>
          <div class="info-card">
            <div class="icon">ğŸ“</div>
            <div>
              <div style="font-weight:700">Ø¢Ø¯Ø±Ø³</div>
              <div class="muted">Ø®ÛŒØ§Ø¨Ø§Ù† Ù…Ø«Ø§Ù„ØŒ Ù¾Ù„Ø§Ú© Û±Û²</div>
            </div>
          </div>
          <div class="info-card">
            <div class="icon">ğŸ“</div>
            <div>
              <div style="font-weight:700">ØªÙ…Ø§Ø³</div>
              <div class="muted">Û°Û¹Û±Û²-Û±Û²Û³Û´ÛµÛ¶Û·</div>
            </div>
          </div>
        </div>
      </div>

      <div class="hero-right">
        <div class="hero-slider" id="heroSlider" aria-live="polite">
          <!-- Ø§Ø³Ù„Ø§ÛŒØ¯Ù‡Ø§ Ø¨Ø§ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
          <div class="slider-dots" id="sliderDots" role="tablist" aria-label="Ù†Ù‚Ø§Ø· Ø§Ø³Ù„Ø§ÛŒØ¯Ø±"></div>
        </div>
      </div>
    </section>

    <!-- toolbar -->
    <section class="toolbar" id="menu">
      <div class="filters" role="tablist" aria-label="ÙÛŒÙ„ØªØ± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ">
        <button data-filter="all" class="active">Ù‡Ù…Ù‡</button>
        <button data-filter="dessert">Ø¯Ø³Ø±</button>
        <button data-filter="fastfood">ÙØ³Øªâ€ŒÙÙˆØ¯</button>
        <button data-filter="hot">Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ú¯Ø±Ù…</button>
        <button data-filter="cold">Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ø³Ø±Ø¯</button>
      </div>

      <div class="search" role="search" aria-label="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ù†Ùˆ">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.6"/></svg>
        <input id="searchInput" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù…Ù†Ùˆ (ÙØ´Ø§Ø± / Ø¨Ø±Ø§ÛŒ ÙÙˆÚ©ÙˆØ³)" aria-label="Ø¬Ø³ØªØ¬Ùˆ" />
        <div id="resultCount" style="color:var(--muted);font-size:13px">0 Ù…ÙˆØ±Ø¯</div>
      </div>
    </section>

    <!-- Ø¨Ø®Ø´â€ŒÙ‡Ø§ -->
    <section class="sections" id="sectionsContainer" aria-live="polite">
      <!-- Ù‡Ø± Ø¨Ø®Ø´ Ø¨Ø§ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
    </section>

    <!-- ÙÙˆØªØ± Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª -->
    <section id="info" style="margin-top:28px">
      <div style="display:flex;gap:18px;flex-wrap:wrap;align-items:center">
        <div style="flex:1">
          <h3>Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</h3>
          <p id="aboutText" style="color:var(--muted)">Ù…ØªÙ† Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
        </div>
        <div style="width:260px">
          <h4>ØªÙ…Ø§Ø³</h4>
          <p style="color:var(--muted)">Û°Û¹Û±Û²-Û±Û²Û³Û´ÛµÛ¶Û·</p>
        </div>
      </div>
    </section>

    <footer>
      Â© Û²Û°Û²Û¶ Ú©Ø§ÙÙ‡ ØªØ§Ù¾ ØªÙ†ÙˆØ± â€” Ù‡Ù…Ù‡ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª
    </footer>
  </main>

  <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¬Ø²Ø¦ÛŒØ§Øª -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <div style="display:flex;align-items:center;gap:12px">
        <h3 id="modalTitle">Ø¹Ù†ÙˆØ§Ù†</h3>
        <button class="btn close" id="modalClose" aria-label="Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„">Ã—</button>
      </div>
      <div id="modalBody" style="margin-top:12px"></div>
    </div>
  </div>

  <!-- Ø¯Ø±Ø§ÙˆØ± Ù…ÙˆØ¨Ø§ÛŒÙ„ -->
  <aside class="drawer" id="mobileDrawer" aria-hidden="true">
    <button class="btn close" id="drawerClose" aria-label="Ø¨Ø³ØªÙ† Ù…Ù†Ùˆ">Ã—</button>
    <nav style="display:flex;flex-direction:column;gap:8px">
      <a href="#dessert" data-target="dessert">Ø¯Ø³Ø±</a>
      <a href="#fastfood" data-target="fastfood">ÙØ³Øªâ€ŒÙÙˆØ¯</a>
      <a href="#hot" data-target="hot">Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ú¯Ø±Ù…</a>
      <a href="#cold" data-target="cold">Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ø³Ø±Ø¯</a>
      <a href="#info" data-target="info">Ø§Ø·Ù„Ø§Ø¹Ø§Øª</a>
    </nav>
  </aside>

  <!-- Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ù„Ø§ -->
  <button class="to-top" id="toTop" aria-label="Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ù„Ø§">â†‘</button>

  <!-- ===========================
       3. SCRIPT
       =========================== -->
  <script>
    /* ============
       ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡ Ùˆ Ú©Ù…Ú©â€ŒÚ©Ù†Ù†Ø¯Ù‡â€ŒÙ‡Ø§
       ============ */
    const api = {
      items: '/api/items',
      settings: '/api/settings',
      upload: '/api/upload'
    };

    const token = localStorage.getItem('token') || null; // Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø§ÛŒØ¯ ØªÙˆÚ©Ù† Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†Ø¯

    const qs = (s, el=document) => el.querySelector(s);
    const qsa = (s, el=document) => Array.from(el.querySelectorAll(s));

    /* ============
       Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ùˆ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ Ø§Ø² Ø¨Ú©â€ŒØ§Ù†Ø¯
       ============ */
    let SETTINGS = { heroImages: [], siteTitle: 'Ú©Ø§ÙÙ‡ ØªØ§Ù¾ ØªÙ†ÙˆØ±', aboutText: '' };
    let ITEMS = [];

    async function fetchSettings(){
      try{
        const res = await fetch(api.settings);
        if(!res.ok) throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª ØªÙ†Ø¸ÛŒÙ…Ø§Øª');
        const data = await res.json();
        SETTINGS = Object.assign(SETTINGS, data || {});
        applySettings();
      }catch(err){
        console.warn(err);
      }
    }

    async function fetchItems(){
      try{
        const res = await fetch(api.items);
        if(!res.ok) throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§');
        const data = await res.json();
        ITEMS = Array.isArray(data) ? data : [];
        renderSections();
      }catch(err){
        console.warn(err);
      }
    }

    /* ============
       Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±ÙˆÛŒ ØµÙØ­Ù‡
       ============ */
    function applySettings(){
      document.getElementById('heroTitle').textContent = SETTINGS.siteTitle || 'Ú©Ø§ÙÙ‡ ØªØ§Ù¾ ØªÙ†ÙˆØ±';
      document.getElementById('heroSubtitle').textContent = SETTINGS.subtitle || 'Ù‚Ù‡ÙˆÙ‡ ØªØ®ØµØµÛŒ Ùˆ ØªØ¬Ø±Ø¨Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯';
      document.getElementById('aboutText').textContent = SETTINGS.aboutText || '';
      buildHeroSlider(SETTINGS.heroImages || []);
    }

    /* ============
       Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ù‡ÛŒØ±Ùˆ
       ============ */
    let sliderIndex = 0;
    let sliderTimer = null;
    function buildHeroSlider(images){
      const slider = qs('#heroSlider');
      slider.innerHTML = '';
      const dots = qs('#sliderDots');
      dots.innerHTML = '';

      if(!images || images.length === 0){
        // ØªØµÙˆÛŒØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ SVG ØªØ²Ø¦ÛŒÙ†ÛŒ
        const slide = document.createElement('div');
        slide.className = 'hero-slide active';
        slide.style.background = 'linear-gradient(135deg,#0b1220,#0f1728)';
        slide.innerHTML = '<svg width="220" height="220" viewBox="0 0 200 200" aria-hidden="true"><defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#ff6b35"/><stop offset="1" stop-color="#ffd166"/></linearGradient></defs><rect x="10" y="10" width="180" height="180" rx="20" fill="url(#g)"/></svg>';
        slider.appendChild(slide);
        return;
      }

      images.forEach((src, i) => {
        const s = document.createElement('div');
        s.className = 'hero-slide' + (i===0 ? ' active' : '');
        s.style.backgroundImage = `url("${src}")`;
        s.setAttribute('role','img');
        s.setAttribute('aria-label', `ØªØµÙˆÛŒØ± Ù‡Ø¯Ø± ${i+1}`);
        slider.appendChild(s);

        const dot = document.createElement('button');
        dot.className = 'dot' + (i===0 ? ' active' : '');
        dot.setAttribute('aria-label', `Ø§Ø³Ù„Ø§ÛŒØ¯ ${i+1}`);
        dot.addEventListener('click', ()=>{ goToSlide(i); });
        dots.appendChild(dot);
      });

      sliderIndex = 0;
      if(sliderTimer) clearInterval(sliderTimer);
      sliderTimer = setInterval(()=>{ nextSlide(); }, 5000);
    }

    function goToSlide(i){
      const slides = qsa('.hero-slide');
      const dots = qsa('.dot');
      slides.forEach(s=>s.classList.remove('active'));
      dots.forEach(d=>d.classList.remove('active'));
      slides[i]?.classList.add('active');
      dots[i]?.classList.add('active');
      sliderIndex = i;
    }
    function nextSlide(){
      const slides = qsa('.hero-slide');
      if(slides.length===0) return;
      sliderIndex = (sliderIndex + 1) % slides.length;
      goToSlide(sliderIndex);
    }

    /* ============
       Ø±Ù†Ø¯Ø± Ø¨Ø®Ø´â€ŒÙ‡Ø§ Ùˆ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
       ============ */
    const SECTION_MAP = {
      dessert: 'Ø¯Ø³Ø±',
      fastfood: 'ÙØ³Øªâ€ŒÙÙˆØ¯',
      hot: 'Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ú¯Ø±Ù…',
      cold: 'Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ Ø³Ø±Ø¯'
    };

    function groupItemsBySection(items){
      const groups = { dessert:[], fastfood:[], hot:[], cold:[] };
      items.forEach(it=>{
        const key = it.s?.name || it.section || 'dessert';
        // normalize keys (backend Ù…Ù…Ú©Ù†Ù‡ id ÛŒØ§ Ù†Ø§Ù… Ø¨Ø¯Ù‡)
        const k = key.toString().toLowerCase();
        if(k.includes('fast') || k.includes('ÙØ³Øª')) groups.fastfood.push(it);
        else if(k.includes('hot') || k.includes('Ú¯Ø±Ù…')) groups.hot.push(it);
        else if(k.includes('cold') || k.includes('Ø³Ø±Ø¯')) groups.cold.push(it);
        else groups.dessert.push(it);
      });
      return groups;
    }

    function renderSections(filter='all', query=''){
      const container = qs('#sectionsContainer');
      container.innerHTML = '';
      const groups = groupItemsBySection(ITEMS);

      Object.keys(SECTION_MAP).forEach(key=>{
        const items = groups[key] || [];
        if(filter !== 'all' && filter !== key) return;
        const sectionEl = document.createElement('div');
        sectionEl.className = 'section reveal';
        sectionEl.id = key;
        sectionEl.innerHTML = `<h2>${SECTION_MAP[key]} <small style="color:var(--muted);font-weight:600">(${items.length})</small></h2><div class="cards" role="list"></div>`;
        const cards = sectionEl.querySelector('.cards');

        const filtered = items.filter(it=>{
          const text = (it.title + ' ' + (it.description||'') + ' ' + (it.tags||'')).toLowerCase();
          return text.includes(query.toLowerCase());
        });

        filtered.forEach(it=>{
          const card = document.createElement('article');
          card.className = 'card';
          card.setAttribute('tabindex','0');
          card.setAttribute('role','listitem');
          const thumb = it.image || it.thumb || '';
          const tags = (it.tags || []).map(t=>`<span class="tag">${t}</span>`).join('');
          const price = formatPrice(it.price || 0);
          card.innerHTML = `
            <div class="thumb" style="background-image:url('${thumb}');background-size:cover;background-position:center
